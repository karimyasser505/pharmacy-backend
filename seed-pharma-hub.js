const { runSQL } = require('./db');

async function seedPharmaHub() {
    console.log('๐ฑ Starting to seed Pharma Hub database...');
    
    try {
        // Sample questions
        const questions = [
            {
                title: "ููู ูููู ุชุญุณูู ุงูุชุตุงุต ุงูุฏูุงุก ุงูููููุ",
                content: "ุฃุนูู ุนูู ุจุญุซ ูุชุนูู ุจุชุญุณูู ุงูุชุตุงุต ุงูุฃุฏููุฉ ุงูููููุฉุ ูุฃุญุชุงุฌ ุฅูู ูุตุงุฆุญ ุญูู ุงูุทุฑู ุงููุฎุชููุฉ ุงููุณุชุฎุฏูุฉ ูุซู ุงุณุชุฎุฏุงู ุงูููุงุฏ ุงููุณุงุนุฏุฉ ููุงูุชุตุงุตุ ูุชุนุฏูู ุฏุฑุฌุฉ ุงูุญููุถุฉุ ูุงุณุชุฎุฏุงู ุงููุงููุชูููููุฌู. ูู ูููู ูุฃุญุฏ ูุดุงุฑูุฉ ุชุฌุฑุจุชู ูู ูุฐุง ุงููุฌุงูุ",
                category: "pharmaceutics",
                author: "ุฃุญูุฏ ูุญูุฏ",
                tags: ["ุงูุชุตุงุต", "ุฃุฏููุฉ ููููุฉ", "ุตูุฏูุฉ ุตูุงุนูุฉ", "ูุงููุชูููููุฌู"]
            },
            {
                title: "ุขุซุงุฑ ุฌุงูุจูุฉ ูุญุชููุฉ ููุนูุงุฌ ุงูููููุงุฆู",
                content: "ุฃุฏุฑุณ ูู ูุณู ุงูุตูุฏูุฉ ุงูุฅูููููููุฉ ูุฃุญุชุงุฌ ุฅูู ูุนูููุงุช ุนู ุงูุขุซุงุฑ ุงูุฌุงูุจูุฉ ุงูุดุงุฆุนุฉ ููุนูุงุฌ ุงูููููุงุฆู ูููููุฉ ุฅุฏุงุฑุชูุง. ุฎุงุตุฉ ุงูุขุซุงุฑ ุนูู ุงูุฌูุงุฒ ุงููุถูู ูุงูุฌูุงุฒ ุงูุนุตุจู. ูู ูููู ูุฃุญุฏ ูุดุงุฑูุฉ ุจุฑูุชููููุงุช ุงูุนูุงุฌ ุงููุณุชุฎุฏูุฉุ",
                category: "clinical-pharmacy",
                author: "ูุงุทูุฉ ุนูู",
                tags: ["ุนูุงุฌ ููููุงุฆู", "ุขุซุงุฑ ุฌุงูุจูุฉ", "ุตูุฏูุฉ ุฅูููููููุฉ", "ุฅุฏุงุฑุฉ ุงูุฃุฏููุฉ"]
            },
            {
                title: "ุทุฑู ุชุญููู ุงูุฃุฏููุฉ ูู ุงูุฏู",
                content: "ุฃุญุชุงุฌ ุฅูู ูุฑุงุฌุนุฉ ุดุงููุฉ ูุทุฑู ุชุญููู ุงูุฃุฏููุฉ ูู ุงูุฏู ุงููุณุชุฎุฏูุฉ ูู ุงููุฎุชุจุฑุงุช ุงูุทุจูุฉ. ุฎุงุตุฉ ุทุฑู ุงููุฑููุงุชูุบุฑุงููุง ุงูุณุงุฆูุฉ ุนุงููุฉ ุงูุฃุฏุงุก (HPLC) ูุงููุฑููุงุชูุบุฑุงููุง ุงูุบุงุฒูุฉ (GC). ูู ูููู ูุฃุญุฏ ุดุฑุญ ุงููุฑูู ุจูู ูุฐู ุงูุทุฑูุ",
                category: "drug-analysis",
                author: "ูุญูุฏ ุฃุญูุฏ",
                tags: ["ุชุญููู ุฏู", "ุฃุฏููุฉ", "ูุฎุชุจุฑุงุช ุทุจูุฉ", "HPLC", "GC"]
            },
            {
                title: "ุงุณุชุฎุฏุงู ุงููุจุงุชุงุช ุงูุทุจูุฉ ูู ุนูุงุฌ ุงูุฃูุฑุงุถ ุงููุฒููุฉ",
                content: "ุฃุจุญุซ ูู ูุฌุงู ุนูู ุงูุนูุงููุฑ ุนู ุงุณุชุฎุฏุงู ุงููุจุงุชุงุช ุงูุทุจูุฉ ูู ุนูุงุฌ ุงูุฃูุฑุงุถ ุงููุฒููุฉ ูุซู ุงูุณูุฑู ูุงุฑุชูุงุน ุถุบุท ุงูุฏู. ูู ูููู ูุฃุญุฏ ูุดุงุฑูุฉ ุฏุฑุงุณุงุช ุญุฏูุซุฉ ูู ูุฐุง ุงููุฌุงูุ",
                category: "pharmacognosy",
                author: "ุณุงุฑุฉ ูุญููุฏ",
                tags: ["ูุจุงุชุงุช ุทุจูุฉ", "ุฃูุฑุงุถ ูุฒููุฉ", "ุนูู ุงูุนูุงููุฑ", "ุทุจ ุจุฏูู"]
            },
            {
                title: "ุชุทููุฑ ุฃุดูุงู ุฏูุงุฆูุฉ ุฌุฏูุฏุฉ ุจุงุณุชุฎุฏุงู ุงูุชูููููุฌูุง ุงูุญูููุฉ",
                content: "ุฃุนูู ุนูู ูุดุฑูุน ูุชุนูู ุจุชุทููุฑ ุฃุดูุงู ุฏูุงุฆูุฉ ุฌุฏูุฏุฉ ุจุงุณุชุฎุฏุงู ุงูุชูููููุฌูุง ุงูุญูููุฉ. ุฃุฑูุฏ ูุนุฑูุฉ ุงููุฒูุฏ ุนู ุงุณุชุฎุฏุงู ุงูุจุฑูุชููุงุช ุงููุคุชููุฉ ูุงูุฌููุงุช ูู ุชุทููุฑ ุงูุฃุฏููุฉ. ูู ูููู ูุฃุญุฏ ูุดุงุฑูุฉ ุฎุจุฑุชูุ",
                category: "pharmaceutical-chemistry",
                author: "ุนูู ุญุณู",
                tags: ["ุชูููููุฌูุง ุญูููุฉ", "ุจุฑูุชููุงุช ูุคุชููุฉ", "ุนูุงุฌ ุฌููู", "ุฃุดูุงู ุฏูุงุฆูุฉ"]
            },
            {
                title: "ููุงูุฌ ุงูุจุญุซ ูู ุงูุฏุฑุงุณุงุช ุงูุณุฑูุฑูุฉ",
                content: "ุฃุญุชุงุฌ ุฅูู ููู ุฃูุถู ูููุงูุฌ ุงูุจุญุซ ุงููุณุชุฎุฏูุฉ ูู ุงูุฏุฑุงุณุงุช ุงูุณุฑูุฑูุฉ ููุฃุฏููุฉ. ุฎุงุตุฉ ุงูุชุฌุงุฑุจ ุงูุนุดูุงุฆูุฉ ุงููุถุจูุทุฉ (RCT) ูุงูุฏุฑุงุณุงุช ุงูููุทุนูุฉ. ูู ูููู ูุฃุญุฏ ุดุฑุญ ูุฐู ุงูููุงูุฌุ",
                category: "research-methods",
                author: "ููุฑ ุงูุฏูู",
                tags: ["ุฏุฑุงุณุงุช ุณุฑูุฑูุฉ", "ููุงูุฌ ุจุญุซ", "RCT", "ุฅุญุตุงุก ุญููู"]
            }
        ];

        // Insert questions
        for (const question of questions) {
            const result = await runSQL(
                `INSERT INTO questions (title, content, category, author, tags, created_at, views) 
                 VALUES (?, ?, ?, ?, ?, datetime('now', '-' || ? || ' days'), ?)`,
                [
                    question.title,
                    question.content,
                    question.category,
                    question.author,
                    JSON.stringify(question.tags),
                    Math.floor(Math.random() * 30), // Random days ago
                    Math.floor(Math.random() * 100) + 10 // Random views
                ]
            );
            
            const questionId = result.lastID;
            console.log(`โ Added question: ${question.title}`);
            
            // Add some comments for each question
            const commentCount = Math.floor(Math.random() * 4) + 1; // 1-4 comments
            
            for (let i = 0; i < commentCount; i++) {
                const comments = [
                    "ุดูุฑุงู ุนูู ุงูุณุคุงู ุงูููู! ูุฐุง ููุถูุน ูุญุชุงุฌ ุฅูู ูุฒูุฏ ูู ุงูุจุญุซ.",
                    "ุฃุนุชูุฏ ุฃู ูุฐุง ุงูุณุคุงู ููุชุญ ูุฌุงูุงู ูุงุณุนุงู ููููุงุด. ูู ููููู ุชูุถูุญ ุงููุฒูุฏุ",
                    "ููุงู ุฏุฑุงุณุฉ ุญุฏูุซุฉ ูุดุฑุช ูู ูุฌูุฉ Nature ุชุชุญุฏุซ ุนู ูุฐุง ุงูููุถูุน.",
                    "ูู ูุฌูุฉ ูุธุฑูุ ูุฐุง ุงูููุฌ ูููู ุฃู ูููู ูุนุงูุงู ุฌุฏุงู ูู ุงูุนูุงุฌ.",
                    "ุฃุญุชุงุฌ ุฅูู ูุฒูุฏ ูู ุงููุนูููุงุช ุญูู ูุฐุง ุงูููุถูุน. ูู ููููู ูุดุงุฑูุฉ ุงููุฑุงุฌุนุ",
                    "ูุฐุง ุณุคุงู ููุชุงุฒ! ุฃุนุชูุฏ ุฃู ุงูุฅุฌุงุจุฉ ุชููู ูู ููู ุงูุขููุฉ ุงูุฌุฒูุฆูุฉ.",
                    "ุดูุฑุงู ุนูู ุทุฑุญ ูุฐุง ุงูุณุคุงู. ุณุฃุจุญุซ ูู ุงูููุถูุน ูุฃุนูุฏ ุฅููู.",
                    "ููุงู ุนุฏุฉ ุฏุฑุงุณุงุช ุชุฏุนู ูุฐุง ุงูููุฌ. ูู ุชุฑูุฏ ุฃู ุฃุดุงุฑููุง ูุนูุ"
                ];
                
                const randomComment = comments[Math.floor(Math.random() * comments.length)];
                const randomAuthor = ["ุฏ. ุฃุญูุฏ", "ุฏ. ูุงุทูุฉ", "ุฏ. ูุญูุฏ", "ุฏ. ุณุงุฑุฉ", "ุฏ. ุนูู"][Math.floor(Math.random() * 5)];
                
                await runSQL(
                    `INSERT INTO comments (question_id, content, author, created_at) 
                     VALUES (?, ?, ?, datetime('now', '-' || ? || ' hours'))`,
                    [
                        questionId,
                        randomComment,
                        randomAuthor,
                        Math.floor(Math.random() * 24) // Random hours ago
                    ]
                );
            }
            
            console.log(`   ๐ Added ${commentCount} comments`);
        }
        
        console.log('โ Pharma Hub database seeded successfully!');
        console.log(`๐ Added ${questions.length} questions with comments`);
        
    } catch (error) {
        console.error('โ Error seeding Pharma Hub database:', error);
        throw error;
    }
}

// Run if called directly
if (require.main === module) {
    seedPharmaHub()
        .then(() => {
            console.log('๐ Pharma Hub seeding completed!');
            process.exit(0);
        })
        .catch((error) => {
            console.error('๐ฅ Pharma Hub seeding failed:', error);
            process.exit(1);
        });
}

module.exports = { seedPharmaHub };
